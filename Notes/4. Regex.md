# Detailed Notes: Shell, Globbing, Regular Expressions, I/O Redirection, Shell Scripting, and Emacs

---

## Table of Contents

1.  Globbing
    -  Overview
    -  Special Characters in Globbing
    -  Globbing Exceptions
    -  Examples and Use Cases
    -  Negated Bracket Expressions
2.  I/O Redirection
    -  Standard Redirection Operators
    -  Here Document
    -  File Descriptors
3.  Shell Scripting
    -  Exit and Return
    -  Shell Functions vs Shell Scripts
    -  Aliases
4.  Regular Expressions
    -  Overview and Purpose
    -  ERE (Extended Regular Expressions)
    -  BRE (Basic Regular Expressions)
    -  Special Characters and Quoting in Regex
5.  Emacs
    -  Command Basics
    -  Mark, Region, Copy, Kill Ring
    -  Buffers and Windows
    -  Help System
    -  Mini Buffer Interaction
6.  Summary

---

## 1. Globbing

### Overview
Globbing is a simplified form of pattern matching used by the shell (e.g., bash) primarily for matching file names. It's distinct from, but related to, regular expressions.

- Used implicitly by the shell to match file names.
- Faster and simpler than full regex.
- Only matches filename components (no slashes).

### Special Characters in Globbing

| Character      | Meaning                                                                 |
|----------------|-------------------------------------------------------------------------|
| `*`            | Matches any string of zero or more characters                          |
| `?`            | Matches exactly one character                                          |
| `[abc]`        | Matches any one of the characters `a`, `b`, or `c`                     |
| `[a-z]`        | Matches any character in the range from `a` to `z`                     |
| `[!abc]`       | Matches any character except `a`, `b`, or `c`                          |

Note:
- Patterns like `[a-z-]` can be used to include dash, by putting it last to avoid ambiguity.

### Globbing Exceptions

1. Globs never match slashes (`/`). They only apply to file name components, not across directories.
2. File and directory names starting with `.` (dot files) are hidden and not matched by wildcards unless explicitly specified.

Examples:

- `*` will not match `.filename`
- `.*` will match dot files
- `echo ?del` will not match `.del` because `?` does not match `.` at filename start

### Examples and Use Cases

Example Directory: Contains files foo, bar, .hidden, a.txt, a-b.txt

| Command                         | Matches                   |
|----------------------------------|----------------------------|
| echo *                         | foo, bar, a.txt, a-b.txt  |
| echo .*                        | .hidden, .., .            |
| echo ?.txt                     | None (requires 1-char name)|
| echo [a-c]*                    | bar                       |
| echo [!abc]*                   | Anything not starting a/b/c|

### Negated Bracket Expressions

Syntax: `[!...]` or `[!a-c]`

- `[!abc]` matches any character except `a`, `b`, or `c`
- Best used at the start of character class for clarity
- Can include `.` to prevent hidden file matches

---

## 2. I/O Redirection

### Standard Redirection Operators

| Operator         | Description                                               |
|------------------|-----------------------------------------------------------|
| `>`              | Redirect standard output (overwrite file)                |
| `>>`             | Redirect standard output (append to file)                |
| `<`              | Redirect standard input from file                        |
| `2>&1`           | Redirect standard error (FD 2) to where FD 1 goes         |
| `n>`             | Use custom FD n for redirection                          |
| `<&n` / `>&n`    | Use FD n for input/output                                 |
| `<>file`         | Open file for both reading and writing (rarely used)     |

### Here Document

A "here document" is a redirect that includes text directly in the script or command.

Syntax:
```bash
command <<EOF
multiline input
goes here
EOF
```

- Treated as standard input for the command
- Variable expansion happens within the document

Advanced:
- Can assign to specific file descriptor: `3<<EOF`

---

## 3. Shell Scripting

### Exit and Return

- `exit`: Terminates the shell
  - `exit 1`: Exit with status 1
  - Default: `exit $?` (previous command status)
- `return`: Similar to `exit`, but only exits from shell functions

### Shell Functions vs Shell Scripts

#### Shell Function

```bash
g() {
  grep "$@"
}
```

- Defined in current shell
- Faster (no new process)

#### Shell Script

g file:
```bash
#!/bin/sh
grep "$@"
```

Make executable and added to `$PATH`.

| Aspect          | Shell Function         | Shell Script            |
|------------------|------------------------|--------------------------|
| Scope            | Shell-local            | System-wide (in path)   |
| Performance      | Fast                   | Starts new shell        |
| Suitability      | Small utilities        | Shared/common tools     |

### Aliases

Simplistic way to replace command names:

```bash
alias ll='ls -l'
```

Limitations:
- Cannot take arguments
- Not suitable for complex commands

---

## 4. Regular Expressions

### Overview and Purpose

Regex (regular expressions) define patterns to match strings. Used with tools like grep, sed, awk, Python, etc.

- Various syntaxes (ERE, BRE, Perl-style, etc.)
- Tools support different subsets/extensions

### ERE (Extended Regular Expressions)

Used in: `grep -E`, modern grep, JavaScript, Python

#### Operators

| Operator           | Description                                                   |
|--------------------|---------------------------------------------------------------|
| `.`                | Any character except newline                                  |
| `*`                | 0 or more repetitions                                        |
| `+`                | 1 or more repetitions                                        |
| `?`                | 0 or 1 occurrence                                            |
| `|`                | Alternation (OR) between regex                               |
| `()`               | Grouping (changes precedence)                                |
| `{n}`              | Exactly n occurrences                                        |
| `{n,m}`            | Between n and m repetitions                                  |
| `^`                | Start of line anchor                                         |
| `$`                | End of line anchor                                           |
| `[]`               | Bracket expressions (character classes)                      |

#### Bracket expressions

| Syntax                     | Description                                |
|----------------------------|--------------------------------------------|
| `[abc]`                    | Match 'a', 'b', or 'c'                      |
| `[a-z]`                    | Range: a to z                              |
| `[^abc]`                   | Negate: anything except a, b, or c         |
| `[[:alpha:]]`              | Match alphabetical letters (locale-aware)  |
| `[.]`, `[-]`, `[]]` tricks | Special syntax rules to include symbols    |

Special character handling inside `[]`:

- `-` denotes range unless at start or end
- `]` must be escaped or placed first
- `^` must be first character to negate

#### Examples

| Pattern        | Matches Example                        |
|----------------|-----------------------------------------|
| `abc`         | Only the string abc                    |
| `a.b`         | a followed by any character, then b    |
| `a*`          | zero or more a's                        |
| `a+`          | one or more a's                         |
| `(ab|cd)+`    | ab or cd, repeated                     |
| `^xyz$`       | entire line must be `xyz`              |

### BRE (Basic Regular Expressions)

Used by: `grep` (default)

#### Differences from ERE

- No `+`, `?`, or `|` directly.
- `()` and `{}` not special unless backslash-prefixed.
- Back-references via `\1`, `\2`, etc.

#### Added Features

- Back-references:
  - `\1` matches same text as first group
  - Example: `\(a\)b\1` matches "aba"

Limitations:

- Lacks OR (`|`)
- More escaping needed
- Back-references cause performance degradation

#### Examples

| Pattern                | Description                                 |
|-------------------------|---------------------------------------------|
| `\(abc\)\1`            | Matches 'abcabc'                            |
| `\(^a.*b$\)`           | Entire line starting with a, ending with b  |

---

## 5. Emacs

### Command Basics

- Control key: `C-<key>`
- Meta key (usually Alt or Esc): `M-<key>`

Common Movements:

| Command       | Action                                 |
|----------------|----------------------------------------|
| `C-x C-f`     | Open file                               |
| `C-x C-s`     | Save file                               |
| `C-g`         | Cancel current command                  |

### Mark, Region, and Copy

| Command       | Action                                 |
|----------------|----------------------------------------|
| `C-SPC` or `C-@`| Set mark at cursor (start selection)  |
| `M-w`         | Copy selected region to kill-ring       |
| `C-w`         | Cut (aka "kill") selected region        |
| `C-y`         | Yank (paste) last kill-ring             |
| `M-y`         | Paste earlier entries in kill-ring      |
| `C-x C-x`     | Exchange point and mark                 |

### Buffers and Windows

- Buffers: Independent in-memory views (files, outputs, shell, etc.)
- Windows: Viewports into buffers

Common Commands:

| Command       | Action                                 |
|----------------|----------------------------------------|
| `C-x b`       | Switch to buffer                        |
| `C-x C-b`     | Show buffer list                        |
| `C-x 2`       | Split window horizontally               |
| `C-x 3`       | Split window vertically                 |
| `C-x 0`       | Close current window                    |
| `C-x 1`       | Focus only on current window            |

### Help System

| Command       | Description                             |
|----------------|----------------------------------------|
| `C-h k <key>` | Describe function bound to key          |
| `C-h m`       | Describe active modes                   |
| `C-h i`       | Info documentation browser              |

### Mini Buffer Interaction

Used for:

- Command execution: `M-x <command>`
- Shell command: `M-!`
- Pipe buffer to command: `M-|`

Examples:

- `M-! date`: Run shell date command
- `M-| sort`: Sort selected region

Key behaviors:

- Uses same movement/copy/edit commands
- Allows evaluation of Emacs Lisp: `M-:`


---

## 6. Summary

This lecture provided a deep and detailed exploration of Unix Shell pattern matching via globbing and regular expressions, covering the distinctions between globbing and regex, the syntax and semantics of ERE and BRE, and intricacies around quoting and special characters. It also delved into shell input-output redirection with advanced use of file descriptors and here-documents, and covered practical script design decisions between shell functions, aliases, and scripts. Finally, the lecture examined the Emacs text editor, introducing core commands for navigation, editing, buffer management, and obtaining help interactively, all designed to enable keyboard-efficient workflows during development.